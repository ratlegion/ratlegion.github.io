// var timesTalked = 0

// label("start")

// turn(180)

// say("Hello adventurer!")

// turnAround()

// function turnAround(){
//   wait(5)

//   turn(0)

//   wait(60)

//   turn(180)
// }

// ask("Have you played before?", "Yes", "No"){
//     if(timesTalked > 0){
//         say("Great! (" + timesTalked + ")")
//     } else{
//         say("Great!")
//     }

//     timesTalked += 1

//     jump("start")
// } & {
//     say("I'll show you the ropes!")

//     #tutorial()
// }

{
    main: {
        function: [
            {
                type: "assign",
                name: "timesTalked",
                value: 0
            },
            {
                type: "function",
                name: "label",
                parameters: [ "start" ]
            },
            {
                type: "function",
                name: "turn",
                parameters: [ 180 ]
            },
            {
                type: "function",
                name: "say",
                parameters: [ "Hello adventurer!" ]
            },
            {
                type: "function",
                name: "turnAround",
                parameters: [ ]
            },
            {
                type: "flow",
                name: "ask",
                parameters: [
                    "Have you played before?",
                    "Yes!",
                    "No"
                ],
                branches: {
                    main: [
                        {
                            type: "flow",
                            name: "if",
                            parameters: [
                                {
                                    type: "operator",
                                    left: {
                                        type: "variable",
                                        name: "timesTalked"
                                    },
                                    mode: ">",
                                    right: 0
                                }
                            ],
                            branches: {
                                main: [
                                    {
                                        type: "function",
                                        name: "say",
                                        parameters: [
                                            {
                                                type: "operator",
                                                left: "Great! (",
                                                mode: "+",
                                                right: {
                                                    type: "operator",
                                                    left: {
                                                        type: "variable",
                                                        name: "timesTalked"
                                                    },
                                                    mode: "+",
                                                    right: ")"
                                                }
                                            }
                                        ]
                                    }
                                ],
                                else: [
                                    {
                                        type: "function",
                                        name: "say",
                                        parameters: "Great!"
                                    }
                                ]
                            }
                        },
                        {
                            type: "increment",
                            name: "timesTalked",
                            value: 1
                        },
                        {
                            type: "function",
                            name: "jump",
                            parameters: [ "start" ]
                        }
                    ],
                    "1": [
                        {
                            type: "function",
                            name: "say",
                            parameters: [ "I'll show you the ropes!" ]
                        },
                        {
                            type: "publicFunction",
                            name: "tutorial",
                            parameters: [ ]
                        }
                    ]
                }
            }
        ]
    },
    turnAround: {
        function: [
            {
                type: "function",
                name: "wait",
                parameters: [ 5 ]
            },
            {
                type: "function",
                name: "turn",
                parameters: [ 0 ]
            },
            {
                type: "function",
                name: "wait",
                parameters: [ 60 ]
            },
            {
                type: "function",
                name: "turn",
                parameters: [ 180 ]
            }
        ]
    }
}
